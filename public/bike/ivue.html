<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
  <div id="app">
    <el-button @click="visible = true">Button</el-button>
    <el-dialog :visible.sync="visible" title="Hello world">
      <p>Try Element</p>
    </el-dialog>
    <el-button type="success">成功按钮</el-button>

    <div style="margin-top:50px;margin-left:100px">
      <div v-for="(item,index) in list">
        <div v-html="item.name" v-if="item.show" @click="btn(item,index,list)"></div>
      </div>
    </div>
  </div>
</body>
  <!-- import Vue before Element -->
  <!-- import JavaScript -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: function() {
        return { 
          visible: false,
          list:[
            {
              addtime: "2021-10-29 10:05:14",
              code: "42,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 42,
              month: "10",
              name: "高级管理",
              order: 3,
              permiss: null,
              pid: 0,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 10:17:26",
              code: "42,44,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 44,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总经理",
              order: 0,
              permiss: null,
              pid: 42,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 10:17:54",
              code: "42,46,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 46,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;商砼砂浆生产厂长",
              order: 0,
              permiss: null,
              pid: 42,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-02-08 15:32:45",
              code: "1,",
              date: "2021-02-08",
              day: "08",
              del: 0,
              del_id: 0,
              del_time: "2021-10-29 09:31:24",
              id: 1,
              month: "02",
              name: "临化水泥",
              order: 2,
              permiss: "31,33,32,12,20,4,11,30,29,3,35,34,10,2,9,8,7,6,1,5",
              pid: 0,
              year: "2021",
              show:true,
            },
            {
              addtime: "2021-10-21 14:57:48",
              code: "1,7,",
              date: "2021-10-21",
              day: "21",
              del: 0,
              del_id: 0,
              del_time: "2021-10-21 16:13:32",
              id: 7,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;砂浆业务经理",
              order: 2,
              permiss: "2,9,8,7,6",
              pid: 1,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 09:54:13",
              code: "1,7,25,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 25,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;司磅员",
              order: 0,
              permiss: null,
              pid: 7,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 09:54:57",
              code: "1,7,27,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 27,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;水泥操作工",
              order: 0,
              permiss: null,
              pid: 7,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 10:05:14",
              code: "42,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 42,
              month: "10",
              name: "高级管理rrrr",
              order: 3,
              permiss: null,
              pid: 0,
              year: "2021",
              show:true
            },
            {
              addtime: "2021-10-29 10:17:26",
              code: "42,44,",
              date: "2021-10-29",
              day: "29",
              del: 0,
              del_id: 0,
              del_time: null,
              id: 44,
              month: "10",
              name: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总经理",
              order: 0,
              permiss: null,
              pid: 42,
              year: "2021",
              show:true
            },
          ]
        }
      },
      methods:{
        btn(v,index,list){
          for(let i=index + 1; list.length>i; i++){
            if(list[i].nbsple > v.nbsple){
              if(v.e){
                this.list[i].show=false
                this.list[i].e=false
              }else{
                this.list[i].show=true
                this.list[i].e=true
              }
            }
            if(list[i].nbsple==v.nbsple){
              break
            }
          }
          v.e=!v.e
          console.log(this.list)
        }
      },
      mounted(){
        this.list.forEach((item,index) =>{
          let nbsp = item.name.match(/&nbsp/g) instanceof Array ? item.name.match(/&nbsp/g).length : 0
          item.nbsple=nbsp
          item.e = true
          item.show=true
        })
      }
    })
  </script>
</html>
